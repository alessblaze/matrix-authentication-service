{#
Copyright 2024, 2025 New Vector Ltd.
Copyright 2022-2024 The Matrix.org Foundation C.I.C.

SPDX-License-Identifier: AGPL-3.0-only OR LicenseRef-Element-Commercial
Please see LICENSE files in the repository root for full details.
-#}

{% extends "base.html" %}

{% block content %}
  <style>
    body { background: linear-gradient(135deg, rgb(76 29 149), rgb(88 28 135), rgb(67 56 202)) !important; min-height: 100vh; }
    .layout-container { background: transparent !important; display: flex !important; align-items: center !important; justify-content: center !important; min-height: 100vh !important; padding: 1rem !important; }
    form { background: rgba(255, 255, 255, 0.1) !important; backdrop-filter: blur(10px) !important; border-radius: 1rem !important; padding: 1rem 2rem 2rem 2rem !important; border: 1px solid rgba(255, 255, 255, 0.2) !important; width: 100% !important; max-width: 500px !important; }

    .cpd-mfa-control { background: transparent !important; border: none !important; color: white !important; caret-color: transparent !important; }
    .cpd-mfa-control:hover { background: transparent !important; border: none !important; }
    .cpd-mfa-control:focus { background: transparent !important; border: none !important; outline: none !important; box-shadow: none !important; }
    .cpd-mfa-digit { background: rgba(255, 255, 255, 0.1) !important; border: 1px solid rgba(255, 255, 255, 0.2) !important; color: white !important; }
    .cpd-button[data-kind="primary"], .cpd-button:not([data-kind]) { background: rgb(139, 92, 246) !important; border: 1px solid rgb(139, 92, 246) !important; color: white !important; }
    .cpd-button[data-kind="primary"]:hover, .cpd-button:not([data-kind]):hover { background: rgb(124, 58, 237) !important; border: 1px solid rgb(124, 58, 237) !important; }
    .icon { background: rgba(255, 255, 255, 0.1) !important; border: 1px solid rgba(255, 255, 255, 0.2) !important; border-radius: 0.75rem !important; padding: 1rem !important; display: inline-flex !important; align-items: center !important; justify-content: center !important; }
    .icon svg { color: white !important; width: 2rem !important; height: 2rem !important; }
    .title, .text { color: white !important; }
    .text-critical { color: rgb(248, 113, 113) !important; }
    .cpd-form-field-label { color: white !important; }
  </style>
  <form method="POST" class="cpd-form-root">
    <header class="page-heading">
      <div class="icon">
        {{ icon.send_solid() }}
      </div>
      <div class="header">
        <h1 class="title">{{ _("mas.verify_email.headline") }}</h1>
        <p class="text">{{ _("mas.verify_email.description", email=authentication.email) }}</p>
      </div>
    </header>
    {% if form.errors is not empty %}
      {% for error in form.errors %}
        <div class="text-critical font-medium">
          {{ errors.form_error_message(error=error) }}
        </div>
      {% endfor %}
    {% endif %}

    <input type="hidden" name="csrf" value="{{ csrf_token }}" />

    {% call(f) field.field(label=_("mas.verify_email.6_digit_code"), name="code", form_state=form, class="mb-4 self-center") %}
      <div class="cpd-mfa-container">
        <input {{ field.attributes(f) }}
          inputmode="numeric"
          type="text"
          minlength="0"
          maxlength="6"
          class="cpd-mfa-control"
          pattern="\d{6}"
          required
          autocomplete="one-time-code">

        {% for _ in range(6) %}
        <div class="cpd-mfa-digit" aria-hidden="true"></div>
        {% endfor %}
      </div>
    {% endcall %}

    {{ button.button(text=_("action.continue")) }}
  </form>
{% endblock content %}
